(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0d12":function(t,e,a){"use strict";a("bb0b")},6854:function(t,e,a){},7492:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column",attrs:{id:"admin_souvenir"}},[a("q-tab-panel",{staticClass:"col",attrs:{name:"souvenir"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("林邊好物")]),a("div",{staticClass:"adminBox",staticStyle:{"max-width":"100%"}},[a("q-card",[a("q-tabs",{staticClass:"text-grey",staticStyle:{"max-width":"100%"},attrs:{dense:"","inline-label":"","outside-arrows":"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.souvenirTab,callback:function(e){t.souvenirTab=e},expression:"souvenirTab"}},t._l(t.products,(function(t,e){return a("q-tab",{key:e,attrs:{name:t.tabNames,label:t.tabLabels}})})),1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.souvenirTab,callback:function(e){t.souvenirTab=e},expression:"souvenirTab"}},t._l(t.products,(function(e,s){return a("q-tab-panel",{key:s,attrs:{name:e.tabNames}},[a("div",{staticClass:"row justify-between"},[0===e.left.length?a("QBtn",{attrs:{color:"deep-orange-9",icon:"add",label:"新增左側欄位"},on:{click:function(e){t.openLeftDialog=!0}}}):a("QBtn",{attrs:{color:"deep-orange-9",icon:"fas fa-pen",label:"編輯左側欄位"},on:{click:function(a){return t.editLeftDialog(e.left[0])}}}),e.left.length>0?a("QBtn",{attrs:{color:"teal",icon:"add",label:"新增右側品項"},on:{click:function(e){t.openRightDialog=!0}}}):a("QBtn",{attrs:{color:"teal-3",icon:"add",label:"新增右側品項",disable:""}})],1),a("div",{staticClass:"row q-mt-md"},[a("q-dialog",{model:{value:t.openLeftDialog,callback:function(e){t.openLeftDialog=e},expression:"openLeftDialog"}},[a("q-card",{staticClass:"my-card",staticStyle:{width:"100%"}},[a("q-card-actions",{staticClass:"row justify-between"},[e.left.length>0?a("div",{staticClass:"text-h6 q-pl-sm"},[a("strong",[t._v("【編輯左側欄位】")])]):a("div",{staticClass:"text-h6 q-pl-sm"},[a("strong",[t._v("【新增左側欄位】")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"deep-orange-2",round:"",icon:"close"},on:{click:t.onLeftReset}})],1),a("q-card-section",[a("QForm",{staticClass:"q-gutter-md column",on:{submit:t.onLeftSubmit,reset:t.onLeftReset}},[a("div",{staticClass:"col q-pl-sm"},[a("strong",[t._v("索引：")]),t._v(t._s(s))]),a("div",{staticClass:"col bg-deep-orange-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品標籤：")]),t._v(t._s(e.tabNames))])]),a("div",{staticClass:"col bg-deep-orange-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品大標題 *")])]),a("q-input",{attrs:{label:"商品大標題 *",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white","lazy-rules":"",rules:[function(t){return t&&t.length>0||"此為必填欄位"}]},model:{value:t.form_left.title,callback:function(e){t.$set(t.form_left,"title",e)},expression:"form_left.title"}})],1),a("div",{staticClass:"col bg-deep-orange-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品簡介 *")])]),a("q-input",{attrs:{label:"概述、引言、介紹 (段落 1) *",type:"textarea",clearable:"","clear-icon":"close",filled:"",dense:"",color:"light-blue-10","bg-color":"white","lazy-rules":"",rules:[function(t){return t&&t.length>0||"此為必填欄位"}]},model:{value:t.form_left.intro_para1,callback:function(e){t.$set(t.form_left,"intro_para1",e)},expression:"form_left.intro_para1"}}),a("q-input",{attrs:{label:"概述、引言、介紹 (段落 2)",type:"textarea",clearable:"","clear-icon":"close",filled:"",dense:"",color:"light-blue-10","bg-color":"white"},model:{value:t.form_left.intro_para2,callback:function(e){t.$set(t.form_left,"intro_para2",e)},expression:"form_left.intro_para2"}}),a("q-input",{attrs:{label:"概述、引言、介紹 (段落 3)",type:"textarea",clearable:"","clear-icon":"close",filled:"",dense:"",color:"light-blue-10","bg-color":"white"},model:{value:t.form_left.intro_para3,callback:function(e){t.$set(t.form_left,"intro_para3",e)},expression:"form_left.intro_para3"}})],1),a("div",{staticClass:"col bg-deep-orange-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("保存方式")])]),a("q-input",{attrs:{label:"保存方式",type:"textarea",clearable:"","clear-icon":"close",filled:"",dense:"",color:"light-blue-10","bg-color":"white"},model:{value:t.form_left.keep,callback:function(e){t.$set(t.form_left,"keep",e)},expression:"form_left.keep"}})],1),a("div",{staticClass:"col column bg-deep-orange-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("上傳圖片")])]),a("div",{staticClass:"col"},[a("input",{ref:"file",refInFor:!0,attrs:{type:"file",id:"file",accept:"image/*"},on:{change:t.compressFile}})])]),a("q-separator"),a("div",{staticClass:"col q-mr-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"送出",type:"submit",color:"deep-orange-9"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{label:"取消",type:"reset",outline:"",color:"deep-orange-9"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"row q-mt-md"},[a("q-dialog",{model:{value:t.openRightDialog,callback:function(e){t.openRightDialog=e},expression:"openRightDialog"}},[a("q-card",{staticClass:"my-card",staticStyle:{width:"100%"}},[a("q-card-actions",{staticClass:"row justify-between"},[t.form_right._id.length>0?a("div",{staticClass:"text-h6 q-pl-sm"},[a("strong",[t._v("【編輯右側品項】")])]):a("div",{staticClass:"text-h6 q-pl-sm"},[a("strong",[t._v("【新增右側品項】")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"teal-2",round:"",icon:"close"},on:{click:t.onRightReset}})],1),a("q-card-section",[a("QForm",{staticClass:"q-gutter-md column",on:{submit:t.onRightSubmit,reset:t.onRightReset}},[a("div",{staticClass:"col q-pl-sm"},[a("strong",[t._v("索引：")]),t._v(t._s(s))]),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品標籤：")]),t._v(t._s(e.tabNames))])]),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品名稱或農民名字 *")])]),a("q-input",{attrs:{label:"商品名稱或農民名字 *",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white","lazy-rules":"",rules:[function(t){return t&&t.length>0||"此為必填欄位"}]},model:{value:t.form_right.name,callback:function(e){t.$set(t.form_right,"name",e)},expression:"form_right.name"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品價格")])]),a("q-input",{attrs:{label:"商品價格",type:"number",filled:"",dense:"",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.price,callback:function(e){t.$set(t.form_right,"price",t._n(e))},expression:"form_right.price"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商品內容")])]),a("q-input",{attrs:{label:"商品內容",type:"textarea",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.content,callback:function(e){t.$set(t.form_right,"content",e)},expression:"form_right.content"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商家或農民資訊")])]),a("q-input",{attrs:{label:"商家名稱或農民名字",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.contact_name,callback:function(e){t.$set(t.form_right,"contact_name",e)},expression:"form_right.contact_name"}}),a("q-input",{attrs:{label:"連絡電話",type:"tel",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.contact_phone,callback:function(e){t.$set(t.form_right,"contact_phone",e)},expression:"form_right.contact_phone"}}),a("q-input",{attrs:{label:"地址",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.contact_address,callback:function(e){t.$set(t.form_right,"contact_address",e)},expression:"form_right.contact_address"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商家或農民背景故事連結")])]),a("q-input",{attrs:{label:"網頁網址",type:"url",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.link,callback:function(e){t.$set(t.form_right,"link",e)},expression:"form_right.link"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("商家或農民影片")])]),a("q-input",{attrs:{label:"影片網址",type:"url",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white"},model:{value:t.form_right.video,callback:function(e){t.$set(t.form_right,"video",e)},expression:"form_right.video"}})],1),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("上傳圖片 *")])]),a("div",{staticClass:"col"},[a("input",{ref:"file",refInFor:!0,attrs:{type:"file",id:"file",accept:"image/*"},on:{change:t.compressFile}})])]),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("上下架")])]),a("q-toggle",{attrs:{color:"green",label:"上架"},model:{value:t.form_right.toggleValue,callback:function(e){t.$set(t.form_right,"toggleValue",e)},expression:"form_right.toggleValue"}})],1),a("q-separator"),a("div",{staticClass:"col q-mr-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"送出",type:"submit",color:"secondary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{label:"取消",type:"reset",outline:"",color:"secondary"}})],1)],1)],1)],1)],1)],1),e.left.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-5 q-pr-sm"},[a("q-card",{staticClass:"my-card"},[e.left[0]?a("img",{staticStyle:{height:"100%",width:"auto"},attrs:{src:e.left[0].image}}):t._e(),a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v(t._s(e.left[0].title))])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n                    "+t._s(e.left[0].intro_para1)+"\n                  ")])],1)],1),e.left[0].right.length>0?a("div",{staticClass:"col-7 q-ml-auto q-pl-sm"},[a("q-list",t._l(e.left[0].right,(function(e,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{clickable:""}},[a("q-item-section",{staticClass:"q-pl-sm",attrs:{thumbnail:""}},[e.image?a("img",{staticStyle:{height:"50px",width:"auto"},attrs:{src:e.image}}):t._e()]),a("q-item-section",[t._v(t._s(e.name))]),a("q-item-section",{staticClass:"items-end"},[t._v(t._s(e.sell?"上架":"下架"))]),a("q-item-section",[a("div",{staticClass:"row justify-end itemBtns"},[a("q-btn",{attrs:{flat:"",square:"","text-color":"grey-13",icon:"fas fa-pen"},on:{click:function(a){return t.editRightDialog(e)}}})],1)])],1)})),1)],1):t._e()]):t._e()])})),1)],1)],1)]),a("div",{staticClass:"row addTabBtn"},[a("QBtn",{staticClass:"col",attrs:{color:"primary",icon:"add",round:""},on:{click:function(e){t.addTabForm=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-accent"}},[t._v("增加商品種類")])],1),a("q-dialog",{model:{value:t.addTabForm,callback:function(e){t.addTabForm=e},expression:"addTabForm"}},[a("q-card",{staticClass:"my-card",staticStyle:{width:"100%"}},[a("q-card-actions",{staticClass:"row justify-between"},[a("div",{staticClass:"text-h6 q-pl-sm"},[a("strong",[t._v("【新增標籤欄位】")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"blue-2",round:"",icon:"close"}})],1),a("q-card-section",[a("QForm",{staticClass:"q-gutter-md row column",on:{submit:t.addTabSubmit}},[a("div",{staticClass:"col bg-blue-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("標籤中文名稱 *")])]),a("q-input",{attrs:{label:"標籤中文名稱 (ex. '蘋果') *",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white","lazy-rules":"",rules:[function(t){return t&&t.length>0||"此為必填欄位"}]},model:{value:t.addTabs.label,callback:function(e){t.$set(t.addTabs,"label",e)},expression:"addTabs.label"}})],1),a("div",{staticClass:"col bg-blue-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("標籤英文名稱 *")])]),a("q-input",{attrs:{label:"標籤英文名稱 (小寫，ex. 'apple') *",filled:"",dense:"",clearable:"","clear-icon":"close",color:"light-blue-10","bg-color":"white","lazy-rules":"",rules:[function(t){return t&&t.length>0||"此為必填欄位"}]},model:{value:t.addTabs.name,callback:function(e){t.$set(t.addTabs,"name",e)},expression:"addTabs.name"}})],1),a("div",{staticClass:"col q-mr-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"送出",type:"submit",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{label:"取消",outline:"",color:"primary"}})],1)])],1)],1)],1)],1)],1)},i=[],o=a("9c40"),l=a("0378"),n=a("7c8d"),r=a.n(n),c={name:"Admin_souvenir",components:{QBtn:o["a"],QForm:l["a"]},data(){return{addTabForm:!1,addTabs:{label:"",name:""},tabs:[],groupNames:[],souvenirTab:"",openLeftDialog:!1,openRightDialog:!1,imageData:null,products:[],form_left:{_id:"",title:"",intro_para1:"",intro_para2:"",intro_para3:"",keep:""},form_right:{_id:"",name:"",price:0,content:"",contact_name:"",contact_phone:"",contact_address:"",link:"",video:"",toggleValue:!0}}},methods:{compressFile(t){const e=t.target.files[0];if(!e)return;const a=this;return new r.a(e,{quality:.6,success(t){console.log("Compress successed",t),a.imageData=t},error(t){console.log(t.message)}})},async addTabSubmit(){try{if(this.tabs.length>0){if(this.tabs.includes(this.addTabs.name))return void this.$q.notify({color:"negative",textColor:"white",message:"新增失敗！此商品標籤已存在",icon:"fas fa-check-circle",position:"top",timeout:2500});this.tabs.push({tabLabel:this.addTabs.label,tabName:this.addTabs.name}),this.groupNames.push(this.addTabs.name),this.addGroupToData(this.tabs),this.$q.notify({color:"positive",textColor:"white",message:"新增成功！請重新整理頁面",icon:"fas fa-check-circle",position:"top",timeout:2500})}else this.tabs.push({tabLabel:this.addTabs.label,tabName:this.addTabs.name}),this.groupNames.push(this.addTabs.name),this.addGroupToData(this.tabs),this.$q.notify({color:"positive",textColor:"white",message:"新增成功！請重新整理頁面",icon:"fas fa-check-circle",position:"top",timeout:2500})}catch(t){console.log(t)}this.addTabs.label="",this.addTabs.name=""},async addGroupToData(t){const e=t[t.length-1];await this.$axios.post("/products",e,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}})},async firstShowTab(t){return 0!==t.length?this.souvenirTab=this.products[0].tabNames:this.souvenirTab="",this.souvenirTab},async onLeftSubmit(){try{const t=new FormData;t.append("groupNames",this.souvenirTab),null!==this.imageData&&t.append("image",this.imageData,this.imageData.name);for(const e in this.form_left)t.append(e,this.form_left[e]);0===this.form_left._id.length?await this.$axios.post("/products",t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}):await this.$axios.patch("/products/"+this.form_left._id,t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}),this.openLeftDialog=!1,this.$q.notify({color:"positive",textColor:"white",message:"新增/修改成功，請重新整理頁面",icon:"fas fa-check-circle",position:"top",timeout:2500})}catch(t){console.log(t),this.$q.notify({color:"negative",textColor:"white",message:t.response.data.message,icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}this.form_left.title="",this.form_left.intro_para1="",this.form_left.intro_para2="",this.form_left.intro_para3="",this.form_left.keep="",this.imageData=null},onLeftReset(){this.form_left.title="",this.form_left.intro_para1="",this.form_left.intro_para2="",this.form_left.intro_para3="",this.form_left.keep="",this.imageData=null},editLeftDialog(t){this.openLeftDialog=!0,this.form_left={_id:t._id,title:t.title,intro_para1:t.intro_para1,intro_para2:t.intro_para2,intro_para3:t.intro_para3,keep:t.keep,image:null}},async onRightSubmit(){try{const t=new FormData;t.append("groupNames",this.souvenirTab),null!==this.imageData&&t.append("image",this.imageData,this.imageData.name);for(const e in this.form_right)t.append(e,this.form_right[e]);0===this.form_right._id.length?await this.$axios.post("/products",t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}):await this.$axios.patch("/products/"+this.form_right._id,t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}),this.openRightDialog=!1,this.$q.notify({color:"positive",textColor:"white",message:"新增成功，請重新整理頁面",icon:"fas fa-check-circle",position:"top",timeout:2500})}catch(t){console.log(t),this.$q.notify({color:"negative",textColor:"white",message:t.response.data.message,icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}this.form_right.name="",this.form_right.price="",this.form_right.content="",this.form_right.contact_name="",this.form_right.contact_phone="",this.form_right.contact_address="",this.form_right.link="",this.form_right.video="",this.form_right.image=null,this.form_right.toggleValue=!0},onRightReset(){this.form_right.name="",this.form_right.price="",this.form_right.content="",this.form_right.contact_name="",this.form_right.contact_phone="",this.form_right.contact_address="",this.form_right.link="",this.form_right.video="",this.form_right.image=null,this.form_right.toggleValue=!0},editRightDialog(t){console.log(t),this.openRightDialog=!0,this.form_right={_id:t._id,name:t.name,price:t.price,content:t.content,contact_name:t.contact_name,contact_phone:t.contact_phone,contact_address:t.contact_address,link:t.link,video:t.video,toggleValue:t.sell,image:null}}},async mounted(){try{const{data:t}=await this.$axios.get("/products");this.products=t.result.map((t=>{if(t.left.length>0&&t.left[0].image&&(t.left[0].image=`https://linbian317.herokuapp.com/files/${t.left[0].image}`,t.left[0].right.length>0))for(let e=0;e<t.left[0].right.length;e++)t.left[0].right[e].image&&(t.left[0].right[e].image=`https://linbian317.herokuapp.com/files/${t.left[0].right[e].image}`);return t}))}catch(t){console.log(t),this.$q.notify({color:"negative",textColor:"white",message:"取得商品失敗！",icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}}},m=c,u=(a("d1aa"),a("2877")),d=a("823b"),p=a("f09f"),h=a("429b"),g=a("7460"),b=a("eb85"),f=a("adad"),_=a("24e8"),v=a("4b7e"),q=a("a370"),x=a("27f9"),C=a("9564"),w=a("1c1c"),y=a("66e5"),k=a("4074"),D=a("05c0"),$=a("7f67"),T=a("714f"),Q=a("eebe"),N=a.n(Q),S=Object(u["a"])(m,s,i,!1,null,"d2a2db80",null);e["default"]=S.exports;N()(S,"components",{QTabPanel:d["a"],QCard:p["a"],QTabs:h["a"],QTab:g["a"],QSeparator:b["a"],QTabPanels:f["a"],QDialog:_["a"],QCardActions:v["a"],QBtn:o["a"],QCardSection:q["a"],QInput:x["a"],QToggle:C["a"],QList:w["a"],QItem:y["a"],QItemSection:k["a"],QTooltip:D["a"]}),N()(S,"directives",{ClosePopup:$["a"],Ripple:T["a"]})},"75c6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_info"}},[a("q-tab-panel",{attrs:{name:"info"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("在地資訊")]),a("p",[t._v("在地資訊 ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")]),a("p",[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")])])],1)},i=[],o={name:"Admin_info"},l=o,n=a("2877"),r=a("823b"),c=a("eebe"),m=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports;m()(u,"components",{QTabPanel:r["a"]})},"7c3a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_faq"}},[a("q-tab-panel",{attrs:{name:"faq"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("FAQ")]),a("p",[t._v("FAQ ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")]),a("p",[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")])])],1)},i=[],o={name:"Admin_faq"},l=o,n=a("2877"),r=a("823b"),c=a("eebe"),m=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports;m()(u,"components",{QTabPanel:r["a"]})},a962:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_news"}},[a("q-tab-panel",{attrs:{name:"news"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("最新消息")]),a("p",[t._v("ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")]),a("p",[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")])])],1)},i=[],o={name:"Admin_news"},l=o,n=a("2877"),r=a("823b"),c=a("eebe"),m=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports;m()(u,"components",{QTabPanel:r["a"]})},bb0b:function(t,e,a){},c3ee:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_index"}},[a("q-tab-panel",{staticClass:"column",attrs:{name:"index"}},[a("div",{staticClass:"col text-h4 q-mb-md"},[t._v("首頁")]),a("div",{staticClass:"col column",staticStyle:{width:"100%"}},[a("div",{staticClass:"col q-mb-sm"},[a("QBtn",{attrs:{color:"teal",icon:"add",label:"新增資料"},on:{click:function(e){t.openCarouselDialog=!0}}})],1),a("div",{staticClass:"col",staticStyle:{width:"100%"}},[a("q-table",{attrs:{title:"【輪播圖】",data:t.indexDatas,columns:t.columns,dense:t.$q.screen.lt.md,"row-key":"name",pagination:t.pagination,"title-class":"text-teal-10","table-class":"table","table-style":{width:"100%"}},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"image",attrs:{props:e}},[a("img",{staticStyle:{width:"auto",height:"50px"},attrs:{src:e.row.image}})]),a("q-td",{key:"link",attrs:{props:e}},[t._v("\n                "+t._s(e.row.link)+"\n              ")]),a("q-td",{key:"time",attrs:{props:e}},[t._v("\n                "+t._s(e.row.time[e.row.time.length-1])+"\n              ")]),a("q-td",{key:"show",attrs:{props:e}},[a("q-badge",{staticStyle:{height:"25px"},attrs:{color:t.getColor(e.row.show)}},[t._v("\n                "+t._s(e.row.show?"是":"否")+"\n                ")])],1),a("q-td",{key:"edit",attrs:{props:e}},[a("q-btn",{attrs:{flat:"",square:"","text-color":"grey-13",icon:"fas fa-pen"},on:{click:function(a){return t.editData(e.rowIndex)}}})],1)],1)]}}])})],1),a("div",{staticClass:"col"},[a("q-dialog",{model:{value:t.openCarouselDialog,callback:function(e){t.openCarouselDialog=e},expression:"openCarouselDialog"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-actions",{staticClass:"row q-mx-md q-mt-md justify-between"},[t.form._id.length>0?a("div",{staticClass:"col text-h6"},[a("strong",[t._v("編輯資料")])]):a("div",{staticClass:"col text-h6"},[a("strong",[t._v("新增資料")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"teal-2",round:"",icon:"close"},on:{click:t.indexReset}})],1),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md column",on:{submit:t.indexSubmit,reset:t.indexReset}},[a("div",{staticClass:"col q-pa-md q-mb-md q-mx-md column bg-teal-1"},[a("div",{staticClass:"col q-pb-md text-h6"},[t._v("【輪播圖】")]),a("div",{staticClass:"col q-pb-md"},[a("input",{ref:"file",attrs:{type:"file",id:"file",accept:"image/*"},on:{change:t.compressFile}}),a("p",{staticClass:"q-pt-sm text-red-14",staticStyle:{"font-size":"0.5rem"}},[t._v("圖片大小不得大於 3 MB")])]),a("q-input",{attrs:{outlined:"","bg-color":"white",label:"相關連結",type:"link"},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}}),a("div",{staticClass:"col bg-teal-1 q-pa-sm q-mr-md rounded-borders"},[a("div",{staticClass:"q-mb-sm"},[a("strong",[t._v("顯示與否")])]),a("q-toggle",{attrs:{color:"green",label:"顯示"},model:{value:t.form.show,callback:function(e){t.$set(t.form,"show",e)},expression:"form.show"}})],1)],1),a("q-separator"),a("div",{staticClass:"col row justify-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"送出",type:"submit",color:"secondary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"取消",type:"reset",outline:"",color:"secondary"}})],1),t._v("`\n            ")],1)],1)],1)],1)],1),a("div",{staticClass:"col q-mt-xl"},[0===t.indexNumDatas.length?a("QBtn",{attrs:{color:"deep-orange-9",icon:"add",label:"新增資料"},on:{click:function(e){t.openNumDialog=!0}}}):a("QBtn",{attrs:{color:"deep-orange-9",icon:"fas fa-pen",label:"編輯資料"},on:{click:function(e){return t.editNumData(t.indexNumDatas.length-1)}}})],1),a("div",{staticClass:"col q-mt-sm"},[a("q-card",[a("q-card-section",{staticClass:"column"},[a("div",{staticClass:"col q-mb-md"},[a("div",{staticClass:"col text-h6 text-deep-orange-10"},[t._v("【數據】")])]),a("div",{staticClass:"col row justify-between text-center"},[a("div",{staticClass:"col column"},[a("div",{staticClass:"col"},[a("strong",[t._v("環境教育")])]),t.indexNumDatas.length>0?a("div",{staticClass:"col"},[t._v(t._s(t.indexNumDatas[t.indexNumDatas.length-1].num_edu))]):t._e()]),a("div",{staticClass:"col column"},[a("div",{staticClass:"col"},[a("strong",[t._v("深度體驗")])]),t.indexNumDatas.length>0?a("div",{staticClass:"col"},[t._v(t._s(t.indexNumDatas[t.indexNumDatas.length-1].num_exp))]):t._e()]),a("div",{staticClass:"col column"},[a("div",{staticClass:"col"},[a("strong",[t._v("淨灘人數")])]),t.indexNumDatas.length>0?a("div",{staticClass:"col"},[t._v(t._s(t.indexNumDatas[t.indexNumDatas.length-1].num_people))]):t._e()]),a("div",{staticClass:"col column"},[a("div",{staticClass:"col"},[a("strong",[t._v("農廢棄再生")])]),t.indexNumDatas.length>0?a("div",{staticClass:"col"},[t._v(t._s(t.indexNumDatas[t.indexNumDatas.length-1].num_trash))]):t._e()])])])],1)],1),a("div",{staticClass:"col"},[a("q-dialog",{model:{value:t.openNumDialog,callback:function(e){t.openNumDialog=e},expression:"openNumDialog"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-actions",{staticClass:"row q-mx-md q-mt-md justify-between"},[t.form._id.length>0?a("div",{staticClass:"col text-h6"},[a("strong",[t._v("編輯資料")])]):a("div",{staticClass:"col text-h6"},[a("strong",[t._v("新增資料")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"teal-2",round:"",icon:"close"},on:{click:t.indexReset}})],1),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md column",on:{submit:t.indexNumSubmit,reset:t.indexNumReset}},[a("div",{staticClass:"col q-pa-md q-mb-md q-mx-md column bg-teal-1"},[a("div",{staticClass:"col q-pb-md text-h6"},[t._v("【數據】")]),a("div",{staticClass:"col row"},[a("div",{staticClass:"col q-mr-sm column"},[a("div",{staticClass:"col-4"},[a("strong",[t._v("環境教育：")])]),a("div",{staticClass:"col-8"},[a("q-input",{staticStyle:{"max-width":"150px"},attrs:{type:"number",outlined:"","bg-color":"white"},model:{value:t.form_num.num_edu,callback:function(e){t.$set(t.form_num,"num_edu",t._n(e))},expression:"form_num.num_edu"}})],1)]),a("div",{staticClass:"col q-mr-sm column"},[a("div",{staticClass:"col-4"},[a("strong",[t._v("深度體驗：")])]),a("div",{staticClass:"col-8"},[a("q-input",{staticStyle:{"max-width":"150px"},attrs:{type:"number",outlined:"","bg-color":"white"},model:{value:t.form_num.num_exp,callback:function(e){t.$set(t.form_num,"num_exp",t._n(e))},expression:"form_num.num_exp"}})],1)]),a("div",{staticClass:"col q-mr-sm column"},[a("div",{staticClass:"col-4"},[a("strong",[t._v("淨灘人數：")])]),a("div",{staticClass:"col-8"},[a("q-input",{staticStyle:{"max-width":"150px"},attrs:{type:"number",outlined:"","bg-color":"white"},model:{value:t.form_num.num_people,callback:function(e){t.$set(t.form_num,"num_people",t._n(e))},expression:"form_num.num_people"}})],1)]),a("div",{staticClass:"col column"},[a("div",{staticClass:"col-4"},[a("strong",[t._v("農廢棄再生：")])]),a("div",{staticClass:"col-6"},[a("q-input",{staticStyle:{"max-width":"150px"},attrs:{type:"number",outlined:"","bg-color":"white"},model:{value:t.form_num.num_trash,callback:function(e){t.$set(t.form_num,"num_trash",t._n(e))},expression:"form_num.num_trash"}})],1)])])]),a("q-separator"),a("div",{staticClass:"col row justify-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"送出",type:"submit",color:"secondary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"取消",type:"reset",outline:"",color:"secondary"}})],1),t._v("`\n            ")],1)],1)],1)],1)],1)])])],1)},i=[],o=a("7c8d"),l=a.n(o),n={name:"Admin_index",data(){return{openCarouselDialog:!1,openNumDialog:!1,indexDatas:[],indexNumDatas:[],columns:[{label:"圖片",name:"image",align:"center",sortable:!0,required:!0},{label:"連結",name:"link",align:"center",sortable:!0,required:!0},{label:"建立時間",name:"time",align:"center",sortable:!0,required:!0},{label:"顯示與否",name:"show",align:"center",sortable:!0,required:!0},{label:"編輯",name:"edit",align:"center",required:!0}],pagination:{sortBy:"time",descending:!0,page:1,rowsPerPage:5},imageData:null,time:[],form:{link:"",show:!0,_id:""},form_num:{num_edu:0,num_exp:0,num_people:0,num_trash:0,_id:""}}},methods:{compressFile(t){const e=t.target.files[0];if(!e)return;const a=this;return new l.a(e,{quality:.6,success(t){console.log("Compress successed",t),a.imageData=t},error(t){console.log(t.message)}})},getColor(t){return t?"green":"grey"},getTime(){const t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),a=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return this.time.push(e+" "+a),this.time},editData(t){this.form={_id:this.indexDatas[t]._id,image:null,time:this.indexDatas[t].time,link:this.indexDatas[t].link,show:this.indexDatas[t].show},this.openCarouselDialog=!0},editNumData(t){this.openNumDialog=!0;const e=this.indexNumDatas[t];this.form_num={_id:e._id,num_edu:e.num_edu,num_exp:e.num_exp,num_people:e.num_people,num_trash:e.num_trash}},indexReset(){this.imageData=null,this.form.link="",this.form.show=!0,this.form._id=""},async indexSubmit(){try{const t=new FormData;null!==this.imageData&&t.append("image",this.imageData,this.imageData.name);for(const e in this.form)t.append(e,this.form[e]);this.getTime(),t.append("time",this.time[this.time.length-1]),0===this.form._id.length?await this.$axios.post("/indexData",t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}):await this.$axios.patch("/indexData/"+this.form._id,t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}),this.$q.notify({color:"positive",textColor:"white",message:"新增/修改成功，請重新整理頁面！",icon:"fas fa-check-circle",position:"top",timeout:2500})}catch(t){console.log(t),this.$q.notify({color:"negative",textColor:"white",message:"修改或新增失敗",icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}this.imageData=null,this.time=[],this.form.link="",this.form.show=!0},async indexNumSubmit(){try{const t={_id:this.form_num._id,num_edu:this.form_num.num_edu,num_exp:this.form_num.num_exp,num_people:this.form_num.num_people,num_trash:this.form_num.num_trash};0===this.form_num._id.length?await this.$axios.post("/indexNumData",t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}):(await this.$axios.patch("/indexNumData/"+this.form_num._id,t,{headers:{Authorization:`Bearer ${this.$store.state.users.jwt.token}`}}),this.indexNumDatas[this.form_num.index]={_id:this.form_num._id,num_edu:this.form_num.num_edu,num_exp:this.form_num.num_exp,num_people:this.form_num.num_people,num_trash:this.form_num.num_trash}),this.$q.notify({color:"positive",textColor:"white",message:"新增/修改成功，請重新整理頁面！",icon:"fas fa-check-circle",position:"top",timeout:2500})}catch(t){console.log(t),this.$q.notify({color:"negative",textColor:"white",message:"修改或新增失敗",icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}this.form_num.num_edu=0,this.form_num.num_exp=0,this.form_num.num_people=0,this.form_num.num_trash=0},indexNumReset(){this.form_num.num_edu=0,this.form_num.num_exp=0,this.form_num.num_people=0,this.form_num.num_trash=0}},async mounted(){try{const t=await this.$axios.get("/indexData"),e=await this.$axios.get("/indexNumData");this.indexDatas=t.data.result.map((t=>(t.image&&(t.image=`https://linbian317.herokuapp.com/files/${t.image}`),t))),this.indexNumDatas=e.data.result.map((t=>t))}catch(t){console.error(t),this.$q.notify({color:"negative",textColor:"white",message:"載入資料失敗！",icon:"fas fa-exclamation-circle",position:"top",timeout:2500})}}},r=n,c=(a("0d12"),a("2877")),m=a("823b"),u=a("eaac"),d=a("bd08"),p=a("db86"),h=a("58a81"),g=a("9c40"),b=a("24e8"),f=a("f09f"),_=a("4b7e"),v=a("a370"),q=a("0378"),x=a("27f9"),C=a("9564"),w=a("eb85"),y=a("7f67"),k=a("eebe"),D=a.n(k),$=Object(c["a"])(r,s,i,!1,null,"5166e17d",null);e["default"]=$.exports;D()($,"components",{QTabPanel:m["a"],QTable:u["a"],QTr:d["a"],QTd:p["a"],QBadge:h["a"],QBtn:g["a"],QDialog:b["a"],QCard:f["a"],QCardActions:_["a"],QCardSection:v["a"],QForm:q["a"],QInput:x["a"],QToggle:C["a"],QSeparator:w["a"]}),D()($,"directives",{ClosePopup:y["a"]})},c74f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_activity"}},[a("q-tab-panel",{attrs:{name:"activity"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("感動旅行")]),a("p",[t._v("感動旅行 ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")]),a("p",[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")])])],1)},i=[],o={name:"Admin_activity"},l=o,n=a("2877"),r=a("823b"),c=a("eebe"),m=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports;m()(u,"components",{QTabPanel:r["a"]})},d1aa:function(t,e,a){"use strict";a("6854")},db81:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_about"}},[a("q-tab-panel",{attrs:{name:"about"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("關於我們")]),a("p",[t._v("關於我們 ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")]),a("p",[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis praesentium cumque magnam odio iure quidem, quod illum numquam possimus obcaecati commodi minima assumenda consectetur culpa fuga nulla ullam. In, libero.")])])],1)},i=[],o={name:"Admin_about"},l=o,n=a("2877"),r=a("823b"),c=a("eebe"),m=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports;m()(u,"components",{QTabPanel:r["a"]})},f7c8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin_member"}},[a("q-tab-panel",{attrs:{name:"member"}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("會員管理")]),a("div",{staticClass:"adminBox"},[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.memberTab,callback:function(e){t.memberTab=e},expression:"memberTab"}},[a("q-tab",{attrs:{name:"memberInfo",label:"會員資料"}}),a("q-tab",{attrs:{name:"orderList",label:"訂單資料"}}),a("q-tab",{attrs:{name:"preOrderList",label:"預購資料"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.memberTab,callback:function(e){t.memberTab=e},expression:"memberTab"}},[a("q-tab-panel",{attrs:{name:"memberInfo"}},[a("div",{staticClass:"text-h6"},[t._v("memberInfo")]),t._v("\n            Lorem ipsum dolor sit amet consectetur adipisicing elit.\n          ")]),a("q-tab-panel",{attrs:{name:"orderList"}},[a("div",{staticClass:"text-h6"},[t._v("orderList")]),t._v("\n            Lorem ipsum dolor sit amet consectetur adipisicing elit.\n          ")]),a("q-tab-panel",{attrs:{name:"preOrderList"}},[a("div",{staticClass:"text-h6"},[t._v("preOrderList")]),t._v("\n            Lorem ipsum dolor sit amet consectetur adipisicing elit.\n          ")])],1)],1)],1)])],1)},i=[],o={name:"Admin_member",data(){return{memberTab:"memberInfo"}}},l=o,n=a("2877"),r=a("823b"),c=a("f09f"),m=a("429b"),u=a("7460"),d=a("eb85"),p=a("adad"),h=a("eebe"),g=a.n(h),b=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=b.exports;g()(b,"components",{QTabPanel:r["a"],QCard:c["a"],QTabs:m["a"],QTab:u["a"],QSeparator:d["a"],QTabPanels:p["a"]})}}]);